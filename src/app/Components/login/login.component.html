<div class="d-flex min-vh-100 align-items-center justify-content-center p-3" style="background-color: #f8f9fa;">
  <div class="card shadow-sm border-0" style="width: 100%; max-width: 400px;">
    <div class="card-body p-4">

      <div class="text-center mb-4">
        <div class="mb-3 logo-container">
          <img src="assets/logo.png" alt="Logo NC Detailing" class="login-logo">
        </div>
        <p class="text-secondary">Ingresa a tu cuenta</p>
      </div>

      <form nz-form (ngSubmit)="Login()">

        <div class="mb-3">
          <nz-form-item>
            <nz-form-control>
              <label class="form-label fw-bold mb-1">Usuario *</label>

              <nz-input-group nzPrefixIcon="user" nzSize="large">
                <input 
                  type="text" 
                  nz-input 
                  [(ngModel)]="username" 
                  name="username"
                  placeholder="Usuario" 
                  required
                  [class.is-invalid]="formErrors.username"
                  class="form-control"
                />
              </nz-input-group>

              <div *ngIf="formErrors.username" class="invalid-feedback d-block">
                {{ formErrors.username }}
              </div>
            </nz-form-control>
          </nz-form-item>
        </div>

        <div class="mb-3">
          <nz-form-item>
            <nz-form-control>
              <label class="form-label fw-bold mb-1">Contraseña *</label>

              <nz-input-group nzPrefixIcon="lock" nzSize="large" [nzSuffix]="suffixPassTemplate">
                <input 
                  [type]="showPassword ? 'text' : 'password'"
                  nz-input 
                  [(ngModel)]="password" 
                  name="password"
                  placeholder="Contraseña" 
                  required
                  (keyup.enter)="Login()"
                  [class.is-invalid]="formErrors.password"
                  class="form-control"
                />
              </nz-input-group>

              <ng-template #suffixPassTemplate>
                <i 
                  nz-icon 
                  [nzType]="showPassword ? 'eye-invisible' : 'eye'" 
                  class="password-eye"
                  (click)="togglePassword()">
                </i>
              </ng-template>

              <div *ngIf="formErrors.password" class="invalid-feedback d-block">
                {{ formErrors.password }}
              </div>
            </nz-form-control>
          </nz-form-item>
        </div>

        <div *ngIf="hasFormErrors()" class="alert alert-warning alert-dismissible fade show mb-2" role="alert">
          <div class="d-flex align-items-center">
            <i nz-icon nzType="warning" class="me-2"></i>
            <span>Por favor, corrige los siguientes errores:</span>
          </div>
          <ul class="mb-0 mt-1">
            <li *ngFor="let error of formErrors | keyvalue">{{ error.value }}</li>
          </ul>
          <button type="button" class="btn-close" (click)="clearFormErrors()"></button>
        </div>

        <div *ngIf="errorMessage" class="mb-3">
          <nz-alert nzType="error" [nzMessage]="errorMessage" nzShowIcon nzCloseable (nzOnClose)="clearError()"></nz-alert>
        </div>

        <button 
          nz-button 
          nzType="primary" 
          nzSize="large" 
          nzBlock 
          type="submit"
          class="mb-3"
          [disabled]="!username || !password || isLoading"
          [nzLoading]="isLoading"
        >
          <i nz-icon nzType="login" class="me-2"></i>
          {{ isLoading ? 'Ingresando...' : 'Ingresar' }}
        </button>
      </form>

      <div class="text-center">
        <small class="text-muted">
          Sistema de gestión de detailing automotriz
        </small>
      </div>

    </div>
  </div>
</div>